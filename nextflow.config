manifest {
    mainScript = 'phage.nf'
}

// default parameters
params {
  cores = "8"
  mem = "12"
  help = false
  fasta = ''
  fastq = ''
  dir = ''
  list = false
  databases = 'nextflow-autodownload-databases'
  workdir = "/tmp/nextflow-phages-$USER"
  cloudDatabase = false
  cachedir = "singularity_images"

  // folder structure
  output = 'results'

  // tool deactivation
  dv = false
  ma = false
  mp = false
  vf = false
  vs = false
  pp = false
  sm = false
  vb = false
  vn = false
  anno = false
}


profiles {

       local {
              workDir = params.workdir
              params.cloudProcess = false
              includeConfig 'configs/local.config'
       }

       lsf {
              executor {
                     name = "lsf"
                     queueSize = 200
              }
              workDir = params.workdir
              params.cloudProcess = true
              process.cache = "lenient"
              includeConfig 'configs/node.config'
       }

       docker {
              docker { enabled = true }
              includeConfig 'configs/container.config'
       }

       singularity {
              singularity { 
                     enabled = true
                     autoMounts = true
                     cacheDir = params.cachedir
              }
              includeConfig 'configs/container.config'
       }

       git_action {
              params.cloudProcess = false
              includeConfig 'configs/local.config'
              params {
                     ma = true
                     mp = true
                     vf = false
                     vs = true
                     pp = true
                     sm = true
                     vb = true
                     vn = true
                     dv = true
                     anno = true
                     fasta = 'test-data/all_pos_phage.fa'
              }

       }

// test configs



       ebi {
              params.cloudProcess = true
              params.workdir = "/hps/nobackup2/production/metagenomics/$USER/nextflow-work-$USER"
              params.database = "/homes/$USER/data/nextflow-databases/"
              params.cachedir = "/hps/nobackup2/singularity/$USER"	
              includeConfig 'configs/node.config'
       }

}
